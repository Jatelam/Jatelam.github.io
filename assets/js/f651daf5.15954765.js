"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5083],{9377:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>c,toc:()=>t});var s=r(4848),i=r(8453);const l={slug:"/piper/roshumble",sidebar_position:5},a="ROS2 humble",c={id:"use/assets/ros2humble",title:"ROS2 humble",description:"ubuntu",source:"@site/docs/piper/use/assets/ros2humble.md",sourceDirName:"use/assets",slug:"/piper/roshumble",permalink:"/piper/piper/roshumble",draft:!1,unlisted:!1,editUrl:"https://github.com/Jatelam/jatelam.github.io/docs/piper/use/assets/ros2humble.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{slug:"/piper/roshumble",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"ROS2 FOXY",permalink:"/piper/piper/rosfoxy"},next:{title:"PIPER gazebo \u4eff\u771f",permalink:"/piper/piper/gazebo"}},o={},t=[{value:"\u5b89\u88c5\u65b9\u6cd5",id:"\u5b89\u88c5\u65b9\u6cd5",level:2},{value:"\u5b89\u88c5\u4f9d\u8d56",id:"\u5b89\u88c5\u4f9d\u8d56",level:3},{value:"\u5feb\u901f\u4f7f\u7528",id:"\u5feb\u901f\u4f7f\u7528",level:2},{value:"\u4f7f\u80fdcan\u6a21\u5757",id:"\u4f7f\u80fdcan\u6a21\u5757",level:3},{value:"\u5355\u6761\u673a\u68b0\u81c2",id:"\u5355\u6761\u673a\u68b0\u81c2",level:4},{value:"pc\u53ea\u63d2\u5165\u4e00\u4e2ausb\u8f6ccan\u6a21\u5757",id:"pc\u53ea\u63d2\u5165\u4e00\u4e2ausb\u8f6ccan\u6a21\u5757",level:5},{value:"pc\u63d2\u5165\u591a\u4e2ausb\u8f6ccan\u6a21\u5757",id:"pc\u63d2\u5165\u591a\u4e2ausb\u8f6ccan\u6a21\u5757",level:5},{value:"\u60f3\u8981\u540c\u65f6\u6fc0\u6d3b\u591a\u4e2acan\u6a21\u5757",id:"\u60f3\u8981\u540c\u65f6\u6fc0\u6d3b\u591a\u4e2acan\u6a21\u5757",level:4},{value:"\u8fd0\u884c\u8282\u70b9",id:"\u8fd0\u884c\u8282\u70b9",level:3},{value:"\u5355\u4e2a\u673a\u68b0\u81c2",id:"\u5355\u4e2a\u673a\u68b0\u81c2",level:4},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"piper\u81ea\u5b9a\u4e49\u6d88\u606f",id:"piper\u81ea\u5b9a\u4e49\u6d88\u606f",level:3},{value:"\u4f7f\u7528\u4eff\u771f",id:"\u4f7f\u7528\u4eff\u771f",level:2},{value:"gazebo",id:"gazebo",level:3},{value:"Q&amp;A",id:"qa",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"ros2-humble",children:"ROS2 humble"})}),"\n",(0,s.jsx)(e.h1,{id:"agx-\u673a\u68b0\u81c2humble",children:"agx \u673a\u68b0\u81c2(humble)"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://img.shields.io/badge/Ubuntu-22.04-orange.svg",alt:"ubuntu"})}),"\n",(0,s.jsx)(e.p,{children:"Test:"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"PYTHON"}),(0,s.jsx)(e.th,{children:"STATE"})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.img,{src:"https://img.shields.io/badge/ros-humble-blue.svg",alt:"humble"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.img,{src:"https://img.shields.io/badge/Pass-blue.svg",alt:"Pass"})})]})})]}),"\n",(0,s.jsx)(e.h2,{id:"\u5b89\u88c5\u65b9\u6cd5",children:"\u5b89\u88c5\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5\u4f9d\u8d56",children:"\u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"pip3 install python-can\r\npip3 install scipy\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"pip3 install piper_sdk\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo apt install ros-$ROS_DISTRO-ros2-control\r\nsudo apt install ros-$ROS_DISTRO-ros2-controllers\r\nsudo apt install ros-$ROS_DISTRO-controller-manager\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5feb\u901f\u4f7f\u7528",children:"\u5feb\u901f\u4f7f\u7528"}),"\n",(0,s.jsx)(e.h3,{id:"\u4f7f\u80fdcan\u6a21\u5757",children:"\u4f7f\u80fdcan\u6a21\u5757"}),"\n",(0,s.jsx)(e.p,{children:"\u9996\u5148\u9700\u8981\u8bbe\u7f6e\u597dshell\u811a\u672c\u53c2\u6570"}),"\n",(0,s.jsx)(e.h4,{id:"\u5355\u6761\u673a\u68b0\u81c2",children:"\u5355\u6761\u673a\u68b0\u81c2"}),"\n",(0,s.jsx)(e.h5,{id:"pc\u53ea\u63d2\u5165\u4e00\u4e2ausb\u8f6ccan\u6a21\u5757",children:"pc\u53ea\u63d2\u5165\u4e00\u4e2ausb\u8f6ccan\u6a21\u5757"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsxs)(e.strong,{children:["\u6b64\u5904\u4f7f\u7528",(0,s.jsx)(e.code,{children:"can_activate.sh"}),"\u811a\u672c"]})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u76f4\u63a5\u6267\u884c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"bash can_activate.sh can0 1000000\n"})}),"\n",(0,s.jsx)(e.h5,{id:"pc\u63d2\u5165\u591a\u4e2ausb\u8f6ccan\u6a21\u5757",children:"pc\u63d2\u5165\u591a\u4e2ausb\u8f6ccan\u6a21\u5757"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsxs)(e.strong,{children:["\u6b64\u5904\u4f7f\u7528",(0,s.jsx)(e.code,{children:"can_activate.sh"}),"\u811a\u672c"]})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u62d4\u6389\u6240\u6709can\u6a21\u5757"}),"\n",(0,s.jsx)(e.p,{children:"\u53ea\u5c06\u8fde\u63a5\u5230\u673a\u68b0\u81c2\u7684can\u6a21\u5757\u63d2\u5165PC\uff0c\u6267\u884c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo ethtool -i can0 | grep bus\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5e76\u8bb0\u5f55\u4e0b",(0,s.jsx)(e.code,{children:"bus-info"}),"\u7684\u6570\u503c\u4f8b\u5982",(0,s.jsx)(e.code,{children:"1-2:1.0"})]}),"\n",(0,s.jsxs)(e.p,{children:["ps:",(0,s.jsxs)(e.strong,{children:["\u4e00\u822c\u7b2c\u4e00\u4e2a\u63d2\u5165\u7684can\u6a21\u5757\u4f1a\u9ed8\u8ba4\u662fcan0\uff0c\u5982\u679c\u6ca1\u6709\u67e5\u8be2\u5230can\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.code,{children:"bash find_all_can_port.sh"}),"\u6765\u67e5\u770b\u521a\u624dusb\u5730\u5740\u5bf9\u5e94\u7684can\u540d\u79f0"]})]}),"\n",(0,s.jsxs)(e.p,{children:["\u5047\u8bbe\u4e0a\u9762\u7684\u64cd\u4f5c\u8bb0\u5f55\u7684",(0,s.jsx)(e.code,{children:"bus-info"}),"\u6570\u503c\u4e3a",(0,s.jsx)(e.code,{children:"1-2:1.0"})]}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u6267\u884c,\u67e5\u770bcan\u8bbe\u5907\u662f\u5426\u6fc0\u6d3b\u6210\u529f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'bash can_activate.sh can_piper 1000000 "1-2:1.0"\n'})}),"\n",(0,s.jsxs)(e.p,{children:["ps:",(0,s.jsx)(e.strong,{children:"\u6b64\u5904\u7684\u610f\u601d\u662f\uff0c1-2:1.0\u786c\u4ef6\u7f16\u7801\u7684usb\u7aef\u53e3\u63d2\u5165\u7684can\u8bbe\u5907\uff0c\u540d\u5b57\u88ab\u91cd\u547d\u540d\u4e3acan_piper\uff0c\u6ce2\u7279\u7387\u4e3a1000000\uff0c\u5e76\u6fc0\u6d3b"})]}),"\n",(0,s.jsxs)(e.p,{children:["\u7136\u540e\u6267\u884c",(0,s.jsx)(e.code,{children:"ifconfig"}),"\u67e5\u770b\u662f\u5426\u6709",(0,s.jsx)(e.code,{children:"can_piper"}),"\uff0c\u5982\u679c\u6709\u5219can\u6a21\u5757\u8bbe\u7f6e\u6210\u529f"]}),"\n",(0,s.jsx)(e.h4,{id:"\u60f3\u8981\u540c\u65f6\u6fc0\u6d3b\u591a\u4e2acan\u6a21\u5757",children:"\u60f3\u8981\u540c\u65f6\u6fc0\u6d3b\u591a\u4e2acan\u6a21\u5757"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsxs)(e.strong,{children:["\u6b64\u5904\u4f7f\u7528",(0,s.jsx)(e.code,{children:"can_config.sh"}),"\u811a\u672c"]})}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5728",(0,s.jsx)(e.code,{children:"can_config.sh"}),"\u4e2d\uff0c",(0,s.jsx)(e.code,{children:"EXPECTED_CAN_COUNT"}),"\u53c2\u6570\u4e3a\u60f3\u8981\u6fc0\u6d3b\u7684can\u6a21\u5757\u6570\u91cf,\u73b0\u5728\u5047\u8bbe\u4e3a2"]}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540ecan\u6a21\u5757\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u5355\u72ec\u63d2\u5165PC\uff0c\u6267\u884c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo ethtool -i can0 | grep bus\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5e76\u8bb0\u5f55\u4e0b",(0,s.jsx)(e.code,{children:"bus-info"}),"\u7684\u6570\u503c\u4f8b\u5982",(0,s.jsx)(e.code,{children:"1-2:1.0"})]}),"\n",(0,s.jsx)(e.p,{children:"\u63a5\u7740\u63d2\u5165\u4e0b\u4e00\u4e2acan\u6a21\u5757\uff0c\u6ce8\u610f\u4e0d\u53ef\u4ee5\u4e0e\u4e0a\u6b21can\u6a21\u5757\u63d2\u5165\u7684usb\u53e3\u76f8\u540c\uff0c\u7136\u540e\u6267\u884c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo ethtool -i can1 | grep bus\n"})}),"\n",(0,s.jsxs)(e.p,{children:["ps:",(0,s.jsxs)(e.strong,{children:["\u4e00\u822c\u7b2c\u4e00\u4e2a\u63d2\u5165\u7684can\u6a21\u5757\u4f1a\u9ed8\u8ba4\u662fcan0\uff0c\u7b2c\u4e8c\u4e2a\u4e3acan1\uff0c\u5982\u679c\u6ca1\u6709\u67e5\u8be2\u5230can\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.code,{children:"bash find_all_can_port.sh"}),"\u6765\u67e5\u770b\u521a\u624dusb\u5730\u5740\u5bf9\u5e94\u7684can\u540d\u79f0"]})]}),"\n",(0,s.jsxs)(e.p,{children:["\u5047\u8bbe\u4e0a\u9762\u7684\u64cd\u4f5c\u8bb0\u5f55\u7684",(0,s.jsx)(e.code,{children:"bus-info"}),"\u6570\u503c\u5206\u522b\u4e3a",(0,s.jsx)(e.code,{children:"1-2:1.0"}),"\u3001",(0,s.jsx)(e.code,{children:"1-4:1.0"})]}),"\n",(0,s.jsxs)(e.p,{children:["\u5219\u5c06\u4e0b\u9762\u7684",(0,s.jsx)(e.code,{children:'USB_PORTS["1-9:1.0"]="can_left:1000000"'}),"\u7684\u4e2d\u62ec\u53f7\u5185\u90e8\u7684\u53cc\u5f15\u53f7\u5185\u90e8\u7684\u53c2\u6570\u6362\u4e3a",(0,s.jsx)(e.code,{children:"1-2:1.0"})]}),"\n",(0,s.jsx)(e.p,{children:"\u53e6\u4e00\u4e2a\u540c\u7406"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'USB_PORTS["1-5:1.0"]="can_right:1000000"'})," -> ",(0,s.jsx)(e.code,{children:'USB_PORTS["1-4:1.0"]="can_right:1000000"'})]}),"\n",(0,s.jsxs)(e.p,{children:["ps:",(0,s.jsx)(e.strong,{children:"\u6b64\u5904\u7684\u610f\u601d\u662f\uff0c1-2:1.0\u786c\u4ef6\u7f16\u7801\u7684usb\u7aef\u53e3\u63d2\u5165\u7684can\u8bbe\u5907\uff0c\u540d\u5b57\u88ab\u91cd\u547d\u540d\u4e3acan_left\uff0c\u6ce2\u7279\u7387\u4e3a1000000\uff0c\u5e76\u6fc0\u6d3b"})]}),"\n",(0,s.jsxs)(e.p,{children:["\u7136\u540e\u6267\u884c",(0,s.jsx)(e.code,{children:"bash can_config.sh"}),",\u67e5\u770b\u7ec8\u7aef\u8f93\u51fa\u662f\u5426\u6fc0\u6d3b\u6210\u529f"]}),"\n",(0,s.jsxs)(e.p,{children:["\u7136\u540e\u6267\u884c",(0,s.jsx)(e.code,{children:"ifconfig"}),"\u67e5\u770b\u662f\u4e0d\u662f\u6709",(0,s.jsx)(e.code,{children:"can_left"}),"\u548c",(0,s.jsx)(e.code,{children:"can_right"}),"\uff0c\u5982\u679c\u6709\u5219can\u6a21\u5757\u8bbe\u7f6e\u6210\u529f"]}),"\n",(0,s.jsx)(e.h3,{id:"\u8fd0\u884c\u8282\u70b9",children:"\u8fd0\u884c\u8282\u70b9"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"colcon build\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u5355\u4e2a\u673a\u68b0\u81c2",children:"\u5355\u4e2a\u673a\u68b0\u81c2"}),"\n",(0,s.jsxs)(e.p,{children:["\u8282\u70b9\u540d",(0,s.jsx)(e.code,{children:"piper_single_ctrl"})]}),"\n",(0,s.jsx)(e.p,{children:"param"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"can_port:\u8981\u6253\u5f00\u7684can\u8def\u7531\u540d\u5b57\r\nauto_enable:\u662f\u5426\u81ea\u52a8\u4f7f\u80fd\uff0cTrue\u5219\u5f00\u542f\u7a0b\u5e8f\u5c31\u81ea\u52a8\u4f7f\u80fd\r\n# \u6ce8\u610f\u8fd9\u4e2a\u8bbe\u7f6e\u4e3aFalse\uff0c\u4e2d\u65ad\u7a0b\u5e8f\u540e\u518d\u542f\u52a8\u8282\u70b9\uff0c\u673a\u68b0\u81c2\u4f1a\u4fdd\u6301\u4e0a\u6b21\u542f\u52a8\u7a0b\u5e8f\u7684\u72b6\u6001\r\n# \u82e5\u4e0a\u6b21\u542f\u52a8\u7a0b\u5e8f\u673a\u68b0\u81c2\u72b6\u6001\u4e3a\u4f7f\u80fd\uff0c\u5219\u4e2d\u65ad\u7a0b\u5e8f\u540e\u518d\u542f\u52a8\u8282\u70b9\uff0c\u673a\u68b0\u81c2\u4ecd\u4e3a\u4f7f\u80fd\r\n# \u82e5\u4e0a\u6b21\u542f\u52a8\u7a0b\u5e8f\u673a\u68b0\u81c2\u72b6\u6001\u4e3a\u5931\u80fd\uff0c\u5219\u4e2d\u65ad\u7a0b\u5e8f\u540e\u518d\u542f\u52a8\u8282\u70b9\uff0c\u673a\u68b0\u81c2\u4ecd\u4e3a\u5931\u80fd\r\ngirpper_exist:\u662f\u5426\u6709\u672b\u7aef\u5939\u722a\uff0cTrue\u5219\u8bf4\u660e\u6709\u672b\u7aef\u5939\u722a\uff0c\u4f1a\u5f00\u542f\u5939\u722a\u63a7\u5236\r\nrviz_ctrl_flag:\u662f\u5426\u4f7f\u7528rviz\u6765\u53d1\u9001\u5173\u8282\u89d2\u6d88\u606f\uff0cTrue\u5219\u63a5\u6536rviz\u53d1\u9001\u7684\u5173\u8282\u89d2\u6d88\u606f\r\n#\u7531\u4e8erviz\u4e2d\u7684joint7\u8303\u56f4\u662f[0,0.04]\uff0c\u800c\u771f\u5b9e\u5939\u722a\u884c\u7a0b\u4e3a0.08m\uff0c\u6253\u5f00rviz\u63a7\u5236\u540e\u4f1a\u5c06rviz\u53d1\u51fa\u7684joint7\u4e582\u500d\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6709\u4e24\u4e2a\u542f\u52a8\u5355\u81c2\u7684launch\u6587\u4ef6",(0,s.jsx)(e.code,{children:"start_single_piper_rviz.launch.py"})," \u548c ",(0,s.jsx)(e.code,{children:"start_single_piper.launch.py"})]}),"\n",(0,s.jsx)(e.p,{children:"\u524d\u8005\u662f\u53ef\u4ee5\u4e00\u8d77\u5c06rviz\u542f\u52a8\uff0c\u7136\u540e\u53ef\u4ee5\u62d6\u52a8\u6ed1\u52a8\u6761\u63a7\u5236\u673a\u68b0\u81c2"}),"\n",(0,s.jsx)(e.p,{children:"\u542f\u52a8\u63a7\u5236\u8282\u70b9"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# \u542f\u52a8\u8282\u70b9\r\nros2 run piper piper_single_ctrl --ros-args -p can_port:=can0 -p auto_enable:=false -p gripper_exist:=true -p rviz_ctrl_flag:=true\r\n# \u542f\u52a8launch\r\nros2 launch piper start_single_piper.launch.py can_port:=can0 auto_enable:=false gripper_exist:=false rviz_ctrl_flag:=true\r\n# \u6216\uff0c\u4f1a\u4ee5\u9ed8\u8ba4\u53c2\u6570\u8fd0\u884c\r\nros2 launch piper start_single_piper.launch.py\r\n# \u4e5f\u53ef\u4ee5\u7528rviz\u5f00\u542f\u63a7\u5236,\u9700\u8981\u66f4\u6539\u7684\u53c2\u6570\u5982\u4e0a\r\nros2 launch piper start_single_piper_rviz.launch.py\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"ros2 topic list"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"/arm_status #\u673a\u68b0\u81c2\u72b6\u6001\uff0c\u8be6\u89c1\u4e0b\u6587\r\n/enable_flag #\u4f7f\u80fd\u6807\u5fd7\u4f4d\uff0c\u53d1\u9001\u7ed9\u8282\u70b9\uff0c\u53d1\u9001true\u7528\u6765\u4f7f\u80fd\r\n/end_pose #\u673a\u68b0\u81c2\u672b\u7aef\u4f4d\u59ff\u72b6\u6001\u53cd\u9988\r\n/joint_states #\u8ba2\u9605\u5173\u8282\u6d88\u606f\uff0c\u7ed9\u8fd9\u4e2a\u6d88\u606f\u53d1\u9001\u5173\u8282\u4f4d\u7f6e\u80fd\u63a7\u5236\u673a\u68b0\u81c2\u8fd0\u52a8\r\n/joint_states_single #\u673a\u68b0\u81c2\u5173\u8282\u72b6\u6001\u53cd\u9988\r\n/pos_cmd #\u672b\u7aef\u63a7\u5236\u6d88\u606f\n"})}),"\n",(0,s.jsx)(e.p,{children:"ros2 service list"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"/enable_srv #\u673a\u68b0\u81c2\u4f7f\u80fd\u670d\u52a1\u7aef\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u80fd\u673a\u68b0\u81c2"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# call \u670d\u52a1\u7aef\r\nros2 service call /enable_srv piper_msgs/srv/Enable enable_request:\\ true\\ \r\n# pub topic\r\nros2 topic pub /enable_flag std_msgs/msg/Bool data:\\ true\\ \n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5931\u80fd\u673a\u68b0\u81c2"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# call \u670d\u52a1\u7aef\r\nros2 service call /enable_srv piper_msgs/srv/Enable enable_request:\\ false\\ \r\n# pub topic\r\nros2 topic pub /enable_flag std_msgs/msg/Bool data:\\ false\\ \n"})}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u5e03\u5173\u8282\u6d88\u606f"}),"\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff0c\u673a\u68b0\u81c2\u4f1a\u62ac\u8d77\uff0c\u8bf7\u786e\u4fdd\u673a\u68b0\u81c2\u5de5\u4f5c\u8303\u56f4\u5185\u65e0\u969c\u788d"}),"\n",(0,s.jsx)(e.p,{children:"\u673a\u68b0\u81c2\u4f1a\u4ee5\u9ed8\u8ba4\u901f\u5ea6\u7684\u767e\u5206\u4e4b10\u8fd0\u52a8\uff0c\u5939\u722a\u529b\u77e9\u8bbe\u5b9a0.5N\uff0c\u4f4d\u7f6e\u5982\u4e0b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"ros2 topic pub /joint_states sensor_msgs/msg/JointState \"{header: {stamp: {sec: 0, nanosec: 0}, frame_id: 'piper_single'}, name: ['joint1', 'joint2','joint3','joint4','joint5','joint6','joint7'], position: [0.2,0.2,-0.2,0.3,-0.2,0.5,0.01], velocity: [0,0,0,0,0,0,10], effort: [0,0,0,0,0,0,0.5]}\"\r\n\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9700\u8981\u5148\u6fc0\u6d3bcan\u8bbe\u5907\uff0c\u5e76\u4e14\u8bbe\u7f6e\u6b63\u786e\u7684\u6ce2\u7279\u7387\uff0c\u624d\u53ef\u4ee5\u8bfb\u53d6\u673a\u68b0\u81c2\u6d88\u606f\u6216\u8005\u63a7\u5236\u673a\u68b0\u81c2"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u51fa\u73b0"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"\u4f7f\u80fd\u72b6\u6001: False\r\n<class 'can.exceptions.CanError'> Message NOT sent\r\n<class 'can.exceptions.CanError'> Message NOT sent\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8bf4\u660e\u673a\u68b0\u81c2\u6ca1\u6709\u4e0ecan\u6a21\u5757\u8fde\u540c\uff0c\u62d4\u63d2usb\u540e\uff0c\u91cd\u65b0\u542f\u52a8\u673a\u68b0\u81c2\uff0c\u518d\u6fc0\u6d3bcan\u6a21\u5757\uff0c\u7136\u540e\u5c1d\u8bd5\u91cd\u65b0\u542f\u52a8\u8282\u70b9"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u6253\u5f00\u4e86\u81ea\u52a8\u4f7f\u80fd\uff0c\u5c1d\u8bd5\u4f7f\u80fd5s\u6ca1\u6709\u6210\u529f\u540e\uff0c\u4f1a\u81ea\u52a8\u9000\u51fa\u7a0b\u5e8f"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"piper\u81ea\u5b9a\u4e49\u6d88\u606f",children:"piper\u81ea\u5b9a\u4e49\u6d88\u606f"}),"\n",(0,s.jsxs)(e.p,{children:["ros\u529f\u80fd\u5305",(0,s.jsx)(e.code,{children:"piper_msgs"})]}),"\n",(0,s.jsxs)(e.p,{children:["\u673a\u68b0\u81c2\u81ea\u8eab\u72b6\u6001\u53cd\u9988\u6d88\u606f\uff0c\u5bf9\u5e94can\u534f\u8bae\u4e2d",(0,s.jsx)(e.code,{children:"id=0x2A1"}),"\u7684\u53cd\u9988\u6d88\u606f"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"PiperStatusMsg.msg"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"uint8 ctrl_mode\r\n/*\r\n0x00 \u5f85\u673a\u6a21\u5f0f  \r\n0x01 CAN\u6307\u4ee4\u63a7\u5236\u6a21\u5f0f\r\n0x02 \u793a\u6559\u6a21\u5f0f\r\n0x03 \u4ee5\u592a\u7f51\u63a7\u5236\u6a21\u5f0f\r\n0x04 wifi\u63a7\u5236\u6a21\u5f0f\r\n0x05 \u9065\u63a7\u5668\u63a7\u5236\u6a21\u5f0f\r\n0x06 \u8054\u52a8\u793a\u6559\u8f93\u5165\u6a21\u5f0f\r\n0x07 \u79bb\u7ebf\u8f68\u8ff9\u6a21\u5f0f*/\r\nuint8 arm_status\r\n/*\r\n0x00 \u6b63\u5e38\r\n0x01 \u6025\u505c\r\n0x02 \u65e0\u89e3\r\n0x03 \u5947\u5f02\u70b9\r\n0x04 \u76ee\u6807\u89d2\u5ea6\u8d85\u8fc7\u9650\r\n0x05 \u5173\u8282\u901a\u4fe1\u5f02\u5e38\r\n0x06 \u5173\u8282\u62b1\u95f8\u672a\u6253\u5f00 \r\n0x07 \u673a\u68b0\u81c2\u53d1\u751f\u78b0\u649e\r\n0x08 \u62d6\u52a8\u793a\u6559\u65f6\u8d85\u901f\r\n0x09 \u5173\u8282\u72b6\u6001\u5f02\u5e38\r\n0x0A \u5176\u5b83\u5f02\u5e38  \r\n0x0B \u793a\u6559\u8bb0\u5f55\r\n0x0C \u793a\u6559\u6267\u884c\r\n0x0D \u793a\u6559\u6682\u505c\r\n0x0E \u4e3b\u63a7NTC\u8fc7\u6e29\r\n0x0F \u91ca\u653e\u7535\u963bNTC\u8fc7\u6e29*/\r\nuint8 mode_feedback\r\n/*\r\n0x00 MOVE P\r\n0x01 MOVE J\r\n0x02 MOVE L\r\n0x03 MOVE C*/\r\nuint8 teach_status\r\n/*\r\n0x00 \u5173\u95ed\r\n0x01 \u5f00\u59cb\u793a\u6559\u8bb0\u5f55\uff08\u8fdb\u5165\u62d6\u52a8\u793a\u6559\u6a21\u5f0f\uff09\r\n0x02 \u7ed3\u675f\u793a\u6559\u8bb0\u5f55\uff08\u9000\u51fa\u62d6\u52a8\u793a\u6559\u6a21\u5f0f\uff09\r\n0x03 \u6267\u884c\u793a\u6559\u8f68\u8ff9\uff08\u62d6\u52a8\u793a\u6559\u8f68\u8ff9\u590d\u73b0\uff09\r\n0x04 \u6682\u505c\u6267\u884c\r\n0x05 \u7ee7\u7eed\u6267\u884c\uff08\u8f68\u8ff9\u590d\u73b0\u7ee7\u7eed\uff09\r\n0x06 \u7ec8\u6b62\u6267\u884c\r\n0x07 \u8fd0\u52a8\u5230\u8f68\u8ff9\u8d77\u70b9*/\r\nuint8 motion_status\r\n/*\r\n0x00 \u5230\u8fbe\u6307\u5b9a\u70b9\u4f4d\r\n0x01 \u672a\u5230\u8fbe\u6307\u5b9a\u70b9\u4f4d*/\r\nuint8 trajectory_num\r\n/*0~255 (\u79bb\u7ebf\u8f68\u8ff9\u6a21\u5f0f\u4e0b\u53cd\u9988)*/\r\nint64 err_code//\u6545\u969c\u7801\r\nbool joint_1_angle_limit//1\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool joint_2_angle_limit//2\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool joint_3_angle_limit//3\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool joint_4_angle_limit//4\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool joint_5_angle_limit//5\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool joint_6_angle_limit//6\u53f7\u5173\u8282\u901a\u4fe1\u5f02\u5e38\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_1//1\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_2//2\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_3//3\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_4//4\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_5//5\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\r\nbool communication_status_joint_6//6\u53f7\u5173\u8282\u89d2\u5ea6\u8d85\u9650\u4f4d\uff080\uff1a\u6b63\u5e38 1\uff1a\u5f02\u5e38\uff09\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u673a\u68b0\u81c2\u672b\u7aef\u4f4d\u59ff\u63a7\u5236\uff0c\u6ce8\u610f:\u6709\u4e9b\u5947\u5f02\u70b9\u65e0\u6cd5\u5230\u8fbe"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"PosCmd.msg"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:"float64 x\r\nfloat64 y\r\nfloat64 z\r\nfloat64 roll\r\nfloat64 pitch\r\nfloat64 yaw\r\nfloat64 gripper\r\nint32 mode1\r\nint32 mode2\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4f7f\u7528\u4eff\u771f",children:"\u4f7f\u7528\u4eff\u771f"}),"\n",(0,s.jsx)(e.p,{children:"\u6253\u5f00rviz"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"ros2 launch piper_description display_xacro.launch.py\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd0\u884c\u540e\u4f1a\u53d1\u5e03",(0,s.jsx)(e.code,{children:"/joint_states"}),",\u53ef\u4ee5\u901a\u8fc7",(0,s.jsx)(e.code,{children:"ros2 topic echo /joint_states"})," \u67e5\u770b"]}),"\n",(0,s.jsxs)(e.p,{children:["\u540c\u65f6\u4f1a\u5f39\u51fa\u4e24\u4e2a\u9875\u9762\u5982\u4e0b\uff0c\u6ed1\u52a8\u6761\u6570\u503c\u5bf9\u5e94",(0,s.jsx)(e.code,{children:"/joint_states"}),"\u6570\u503c\uff0c\u62d6\u52a8\u6ed1\u52a8\u6761\u53ef\u4ee5\u6539\u53d8\u5176\u6570\u503c\uff0crviz\u4e2d\u7684\u6a21\u578b\u4e5f\u4f1a\u968f\u52a8"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:" ",src:r(1429).A+"",width:"1198",height:"880"})}),"\n",(0,s.jsx)(e.h3,{id:"gazebo",children:"gazebo"}),"\n",(0,s.jsx)(e.p,{children:"coming..."}),"\n",(0,s.jsx)(e.h2,{id:"qa",children:"Q&A"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u51fa\u73b0"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:'colcon build\r\nStarting >>> piper   \r\nStarting >>> piper_control\r\nStarting >>> piper_description\r\nStarting >>> piper_msgs\r\nFinished <<< piper [0.31s]                                                                                                              \r\n--- stderr: piper_description                                                                                            \r\nCMake Error at CMakeLists.txt:5 (find_package):\r\n  By not providing "Findament_cmake.cmake" in CMAKE_MODULE_PATH this project\r\n  has asked CMake to find a package configuration file provided by\r\n  "ament_cmake", but CMake did not find one.\r\n\r\n  Could not find a package configuration file provided by "ament_cmake" with\r\n  any of the following names:\r\n\r\n    ament_cmakeConfig.cmake\r\n    ament_cmake-config.cmake\r\n\r\n  Add the installation prefix of "ament_cmake" to CMAKE_PREFIX_PATH or set\r\n  "ament_cmake_DIR" to a directory containing one of the above files.  If\r\n  "ament_cmake" provides a separate development package or SDK, be sure it\r\n  has been installed.\r\n\r\n\r\n---\r\nFailed   <<< piper_description [0.45s, exited with code 1]\r\nAborted  <<< piper_control [0.45s]\r\nAborted  <<< piper_msgs [0.45s]\r\n\r\nSummary: 1 package finished [0.55s]\r\n  1 package failed: piper_description\r\n  2 packages aborted: piper_control piper_msgs\r\n  3 packages had stderr output: piper_control piper_description piper_msgs\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"source /opt/ros/foxy/setup.bash\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:'Starting >>> piper   \r\nStarting >>> piper_control\r\nStarting >>> piper_description\r\nStarting >>> piper_msgs\r\nFinished <<< piper [0.33s]                                                                                                              \r\nFinished <<< piper_description [0.42s]                                                                                     \r\n--- stderr: piper_control                                                               \r\nCMake Error at CMakeLists.txt:7 (find_package):\r\n  By not providing "Findcontroller_manager.cmake" in CMAKE_MODULE_PATH this\r\n  project has asked CMake to find a package configuration file provided by\r\n  "controller_manager", but CMake did not find one.\r\n\r\n  Could not find a package configuration file provided by\r\n  "controller_manager" with any of the following names:\r\n\r\n    controller_managerConfig.cmake\r\n    controller_manager-config.cmake\r\n\r\n  Add the installation prefix of "controller_manager" to CMAKE_PREFIX_PATH or\r\n  set "controller_manager_DIR" to a directory containing one of the above\r\n  files.  If "controller_manager" provides a separate development package or\r\n  SDK, be sure it has been installed.\r\n\r\n\r\n---\r\nFailed   <<< piper_control [0.80s, exited with code 1]\r\nAborted  <<< piper_msgs [3.28s]                               \r\n\r\nSummary: 2 packages finished [3.38s]\r\n  1 package failed: piper_control\r\n  1 package aborted: piper_msgs\r\n  1 package had stderr output: piper_control\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo apt install ros-$ROS_DISTRO-ros2-control\r\nsudo apt install ros-$ROS_DISTRO-ros2-controllers\r\nsudo apt install ros-$ROS_DISTRO-controller-manager\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:" \"package 'joint_state_publisher_gui' not found\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo apt install ros-$ROS_DISTRO-joint-state-publisher-gui\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"4",children:["\n",(0,s.jsx)(e.li,{}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo apt install ros-$ROS_DISTRO-robot-state-publisher\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"5",children:["\n",(0,s.jsx)(e.li,{}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"sudo apt install ros-foxy-xacro\n"})})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},1429:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/humble_rviz-4dea98d2f02605783bf328876c3b2fb7.jpg"},8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>c});var s=r(6540);const i={},l=s.createContext(i);function a(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);